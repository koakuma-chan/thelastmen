---
import Layout from "../Layout.astro";

import { fetchArticles } from "../articles";

const { env } = Astro.locals.runtime;

const articles = await fetchArticles(env);
---

<Layout>
  <ul class="grid gap-4 grid-cols-1 lg:grid-cols-3 xl:grid-cols-4">
    {
      articles.map(article => (
        <li>
          <a
            class="block group transition duration-300 filter grayscale hover:grayscale-0"
            href={`/articles/${article.slug}`}
          >
            <div class="relative">
              <div class="aspect-video">
                <img class="rounded-lg" src={article.thumbnailUrl} />
              </div>
            </div>

            <h1
              class="mt-auto p-4 text-sm font-mono transition opacity-80 group-hover:opacity-100"
            >
              {article.title}
            </h1>
          </a>
        </li>
      ))
    }
  </ul>
</Layout>
